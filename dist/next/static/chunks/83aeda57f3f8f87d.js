(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33981,e=>{"use strict";e.s(["default",()=>n],33981);var t=e.i(82607),r=e.i(31424);function s(e){let{prompts:r,onSelectPrompt:s,onEdit:l}=e;return 0===r.length?(0,t.jsx)("p",{className:"mt-4 text-center text-sm text-gray-500",children:"No prompts yet. Add one!"}):(0,t.jsx)("div",{className:"mt-4 space-y-2",children:r.map(e=>(0,t.jsxs)("div",{className:"group flex cursor-pointer items-center justify-between rounded-md p-3 hover:bg-gray-100",onClick:()=>s(e),children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-3 text-xl",children:e.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["v",e.version]})]})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e)},className:"hidden rounded-md px-2 py-1 text-xs font-semibold text-gray-600 group-hover:block hover:bg-gray-200",children:"Edit"})]},e.id))})}function l(e){let{prompt:s,onSave:l,onCancel:a,onDelete:n}=e,[o,i]=(0,r.useState)(s);(0,r.useEffect)(()=>{i(s)},[s]);let d=e=>{let{name:t,value:r}=e.target;i(e=>({...e,[t]:r}))},c=!s.id;return(0,t.jsx)("div",{className:"fixed inset-0 z-10 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsx)("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6 shadow-xl",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(o)},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:c?"Add New Prompt":"Edit Prompt"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700",children:"Icon"}),(0,t.jsx)("input",{type:"text",name:"icon",id:"icon",value:o.icon,onChange:d,className:"mt-1 block w-16 rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,t.jsx)("input",{type:"text",name:"title",id:"title",value:o.title,onChange:d,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"version",className:"block text-sm font-medium text-gray-700",children:"Version"}),(0,t.jsx)("input",{type:"text",name:"version",id:"version",value:o.version,onChange:d,className:"mt-1 block w-24 rounded-md border-gray-300 shadow-sm"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700",children:"Prompt"}),(0,t.jsx)("textarea",{name:"prompt",id:"prompt",value:o.prompt,onChange:d,required:!0,rows:8,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"e.g., 'Summarize the following text into three concise bullet points...'"})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,t.jsx)("div",{children:!c&&(0,t.jsx)("button",{type:"button",onClick:()=>n(s.id),className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700",children:"Delete"})}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"rounded-md bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-800",children:"Save Prompt"})]})]})]})})})}function a(e){let{prompts:s,onSelect:l,onClose:a}=e,[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(0),c=s.filter(e=>e.title.toLowerCase().includes(n.toLowerCase()));return(0,r.useEffect)(()=>{let e=e=>{"ArrowDown"===e.key?(e.preventDefault(),d(e=>(e+1)%(c.length||1))):"ArrowUp"===e.key?(e.preventDefault(),d(e=>(e-1+(c.length||1))%(c.length||1))):"Enter"===e.key?(e.preventDefault(),c[i]&&l(c[i])):"Escape"===e.key&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,i,l,a]),(0,t.jsx)("div",{className:"fixed inset-0 z-20 flex justify-center items-start pt-20 bg-black bg-opacity-50",onClick:a,children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("input",{type:"text",value:n,onChange:e=>{o(e.target.value),d(0)},placeholder:"Search for a prompt...",className:"w-full p-4 border-b border-gray-200 text-base outline-none rounded-t-lg",autoFocus:!0}),(0,t.jsx)("ul",{className:"max-h-80 overflow-y-auto p-2",children:c.length>0?c.map((e,r)=>(0,t.jsxs)("li",{onClick:()=>l(e),className:"flex items-center p-3 rounded-md cursor-pointer ".concat(r===i?"bg-blue-500 text-white":"hover:bg-gray-100"),children:[(0,t.jsx)("span",{className:"text-xl mr-3",children:e.icon}),(0,t.jsx)("span",{children:e.title})]},e.id)):(0,t.jsx)("li",{className:"p-4 text-center text-gray-500",children:"No prompts found."})})]})})}function n(){let[e,n]=function(e,t){let[s,l]=(0,r.useState)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return console.error(e),t}});return(0,r.useEffect)(()=>{try{window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}},[e,s]),[s,l]}("prompts",[]),[o,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),h=(0,r.useRef)(null),g=(0,r.useRef)({start:0,end:0});(0,r.useEffect)(()=>{let e=e=>{e.ctrlKey&&e.shiftKey&&"L"===e.key&&(e.preventDefault(),x(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let b=async e=>{x(!1),p(!0);try{let t=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system:e.prompt,user:d})});if(!t.ok)throw Error("API Error");let r=await t.json();window.parent.postMessage({type:"INSERT_TEXT",text:r.text},"*")}catch(e){alert("Failed to generate text.")}finally{p(!1)}};return(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50 text-gray-800",children:[(0,t.jsxs)("aside",{className:"w-1/3 max-w-sm border-r border-gray-200 p-4 flex flex-col",children:[(0,t.jsxs)("header",{className:"mb-4",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"AI Prompts"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Create and manage your custom commands."})]}),(0,t.jsx)("div",{className:"flex justify-between",children:(0,t.jsx)("button",{onClick:()=>i({id:"",icon:"ðŸ’¡",title:"",version:"1.0",prompt:"",mode:"replace_all"}),className:"w-full rounded-md bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-800",children:"Add New Prompt"})}),(0,t.jsx)("div",{className:"flex-grow overflow-y-auto mt-4",children:(0,t.jsx)(s,{prompts:e,onSelectPrompt:e=>{},onEdit:i})})]}),(0,t.jsxs)("main",{className:"flex-1 p-6 flex flex-col relative",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-medium",children:"AI Editor"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Type your text below. Press ",(0,t.jsx)("kbd",{className:"px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg",children:"Ctrl+Shift+L"})," to open the command palette."]})]}),(0,t.jsx)("textarea",{ref:h,value:d,onChange:e=>c(e.target.value),onSelect:()=>{h.current&&(g.current={start:h.current.selectionStart,end:h.current.selectionEnd})},className:"w-full flex-1 rounded-md border border-gray-300 p-4 text-base focus:border-blue-500 focus:ring-blue-500",placeholder:"Start writing..."}),u&&(0,t.jsx)("div",{className:"absolute bottom-8 right-8 text-gray-500 animate-pulse",children:"Generating..."})]}),o&&(0,t.jsx)(l,{prompt:o,onSave:t=>{t.id?n(e.map(e=>e.id===t.id?t:e)):n([...e,{...t,id:crypto.randomUUID()}]),i(null)},onCancel:()=>i(null),onDelete:t=>{window.confirm("Are you sure you want to delete this prompt?")&&(n(e.filter(e=>e.id!==t)),i(null))}}),m&&(0,t.jsx)(a,{prompts:e,onSelect:b,onClose:()=>x(!1)})]})}}]);